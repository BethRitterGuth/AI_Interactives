<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz: Stephen Crane's Maggie: A Girl of the Streets</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f9f9f9;
            color: #333;
        }
        h1, h2 {
            text-align: center;
            color: #2c3e50;
        }
        .quiz-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        .question {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .question h3 {
            margin-top: 0;
            color: #34495e;
        }
        .options label {
            display: block;
            margin: 12px 0;
            padding: 12px;
            background-color: #f0f0f0;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .options label:hover {
            background-color: #e0e0e0;
        }
        .options input[type="radio"] {
            margin-right: 10px;
        }
        .options input[type="radio"]:disabled + span {
            opacity: 0.7;
        }
        #feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
            text-align: center;
            min-height: 50px;
        }
        .correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        #results {
            display: none;
            margin-top: 40px;
            padding: 25px;
            background-color: #ecf0f1;
            border-radius: 8px;
            text-align: center;
        }
        #name-input {
            margin: 20px auto;
            text-align: center;
        }
        #name-input input {
            padding: 10px;
            width: 300px;
            font-size: 16px;
        }
        button#final-submit {
            display: block;
            width: 250px;
            margin: 30px auto;
            padding: 15px;
            background-color: #27ae60;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
        }
        button#final-submit:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        @media (prefers-color-scheme: dark) {
            body { background-color: #121212; color: #e0e0e0; }
            .quiz-container, .question, #results { background-color: #1e1e1e; }
            .options label { background-color: #2c2c2c; }
            .options label:hover { background-color: #383838; }
        }
        input:focus, button:focus {
            outline: 3px solid #3498db;
        }
    </style>
</head>
<body>
    <h1>Quiz: Stephen Crane's <em>Maggie: A Girl of the Streets</em></h1>
    <p>This quiz is based on the key elements of Stephen Crane's novella. Answer each question and receive immediate feedback.</p>

    <div class="quiz-container">
        <div id="name-input">
            <label for="student-name">Enter your name (will appear on final results):</label><br>
            <input type="text" id="student-name" placeholder="Your Name" required aria-required="true">
        </div>

        <form id="quiz-form">
            <div class="question" role="region" aria-labelledby="q1">
                <h3 id="q1">1. In what year was <em>Maggie: A Girl of the Streets</em> first published?</h3>
                <div class="options" data-question="q1" data-correct="b">
                    <label><input type="radio" name="q1" value="a"> a) 1880</label>
                    <label><input type="radio" name="q1" value="b"> b) 1893</label>
                    <label><input type="radio" name="q1" value="c"> c) 1900</label>
                    <label><input type="radio" name="q1" value="d"> d) 1910</label>
                </div>
                <div id="feedback-q1" role="alert" aria-live="assertive"></div>
            </div>

            <div class="question" role="region" aria-labelledby="q2">
                <h3 id="q2">2. What literary movement is <em>Maggie: A Girl of the Streets</em> considered the first major American example of?</h3>
                <div class="options" data-question="q2" data-correct="c">
                    <label><input type="radio" name="q2" value="a"> a) Romanticism</label>
                    <label><input type="radio" name="q2" value="b"> b) Realism</label>
                    <label><input type="radio" name="q2" value="c"> c) Naturalism</label>
                    <label><input type="radio" name="q2" value="d"> d) Modernism</label>
                </div>
                <div id="feedback-q2" role="alert" aria-live="assertive"></div>
            </div>

            <div class="question" role="region" aria-labelledby="q3">
                <h3 id="q3">3. Where is the story primarily set?</h3>
                <div class="options" data-question="q3" data-correct="b">
                    <label><input type="radio" name="q3" value="a"> a) Chicago</label>
                    <label><input type="radio" name="q3" value="b"> b) The Bowery in New York City</label>
                    <label><input type="radio" name="q3" value="c"> c) Boston</label>
                    <label><input type="radio" name="q3" value="d"> d) San Francisco</label>
                </div>
                <div id="feedback-q3" role="alert" aria-live="assertive"></div>
            </div>

            <div class="question" role="region" aria-labelledby="q4">
                <h3 id="q4">4. What is the protagonist's full name?</h3>
                <div class="options" data-question="q4" data-correct="b">
                    <label><input type="radio" name="q4" value="a"> a) Mary Johnson</label>
                    <label><input type="radio" name="q4" value="b"> b) Maggie Johnson</label>
                    <label><input type="radio" name="q4" value="c"> c) Nellie Griffiths</label>
                    <label><input type="radio" name="q4" value="d"> d) Pete Murphy</label>
                </div>
                <div id="feedback-q4" role="alert" aria-live="assertive"></div>
            </div>

            <div class="question" role="region" aria-labelledby="q5">
                <h3 id="q5">5. Who seduces and later abandons Maggie?</h3>
                <div class="options" data-question="q5" data-correct="b">
                    <label><input type="radio" name="q5" value="a"> a) Jimmie</label>
                    <label><input type="radio" name="q5" value="b"> b) Pete</label>
                    <label><input type="radio" name="q5" value="c"> c) Tommie</label>
                    <label><input type="radio" name="q5" value="d"> d) Her father</label>
                </div>
                <div id="feedback-q5" role="alert" aria-live="assertive"></div>
            </div>

            <div class="question" role="region" aria-labelledby="q6">
                <h3 id="q6">6. Maggie's brother, who becomes a truck driver and is also violent, is named:</h3>
                <div class="options" data-question="q6" data-correct="b">
                    <label><input type="radio" name="q6" value="a"> a) Pete</label>
                    <label><input type="radio" name="q6" value="b"> b) Jimmie</label>
                    <label><input type="radio" name="q6" value="c"> c) Billy</label>
                    <label><input type="radio" name="q6" value="d"> d) Tommie</label>
                </div>
                <div id="feedback-q6" role="alert" aria-live="assertive"></div>
            </div>

            <div class="question" role="region" aria-labelledby="q7">
                <h3 id="q7">7. What ultimately happens to Maggie?</h3>
                <div class="options" data-question="q7" data-correct="c">
                    <label><input type="radio" name="q7" value="a"> a) She marries Pete and lives happily</label>
                    <label><input type="radio" name="q7" value="b"> b) She becomes a successful actress</label>
                    <label><input type="radio" name="q7" value="c"> c) She turns to prostitution and dies (implied)</label>
                    <label><input type="radio" name="q7" value="d"> d) She moves to the countryside</label>
                </div>
                <div id="feedback-q7" role="alert" aria-live="assertive"></div>
            </div>

            <div class="question" role="region" aria-labelledby="q8">
                <h3 id="q8">8. Naturalism in the novel emphasizes that characters' lives are shaped primarily by:</h3>
                <div class="options" data-question="q8" data-correct="b">
                    <label><input type="radio" name="q8" value="a"> a) Free will and personal choices</label>
                    <label><input type="radio" name="q8" value="b"> b) Environment, heredity, and indifferent forces</label>
                    <label><input type="radio" name="q8" value="c"> c) Divine intervention</label>
                    <label><input type="radio" name="q8" value="d"> d) Romantic love</label>
                </div>
                <div id="feedback-q8" role="alert" aria-live="assertive"></div>
            </div>

            <div class="question" role="region" aria-labelledby="q9">
                <h3 id="q9">9. Maggie's mother is characterized as:</h3>
                <div class="options" data-question="q9" data-correct="b">
                    <label><input type="radio" name="q9" value="a"> a) Kind and supportive</label>
                    <label><input type="radio" name="q9" value="b"> b) An abusive alcoholic</label>
                    <label><input type="radio" name="q9" value="c"> c) Wealthy and refined</label>
                    <label><input type="radio" name="q9" value="d"> d) A successful businesswoman</label>
                </div>
                <div id="feedback-q9" role="alert" aria-live="assertive"></div>
            </div>

            <div class="question" role="region" aria-labelledby="q10">
                <h3 id="q10">10. Why did Crane initially self-publish the novella?</h3>
                <div class="options" data-question="q10" data-correct="b">
                    <label><input type="radio" name="q10" value="a"> a) It became an immediate bestseller</label>
                    <label><input type="radio" name="q10" value="b"> b) Publishers found the subject matter too risqué and realistic</label>
                    <label><input type="radio" name="q10" value="c"> c) He wanted to use a pseudonym only</label>
                    <label><input type="radio" name="q10" value="d"> d) It was required by his university</label>
                </div>
                <div id="feedback-q10" role="alert" aria-live="assertive"></div>
            </div>

            <button type="button" id="final-submit" disabled>Submit Quiz & Email Results</button>
        </form>

        <div id="results" aria-live="polite">
            <h2>Your Final Results</h2>
            <p id="score-display"></p>
            <p id="name-display"></p>
            <p>Your score has been sent to the instructor via your email client.</p>
        </div>
    </div>

    <script>
        const praises = ["Excellent!", "Great job!", "Well done!", "Correct – fantastic!", "Spot on!", "Perfect!"];
        const encouragements = ["Not quite.", "That's not correct.", "Good try, but no.", "Close, but not right."];

        const letterMap = { a: "a", b: "b", c: "c", d: "d" };

        let score = 0;
        const totalQuestions = document.querySelectorAll('.options').length;

        // Handle immediate feedback when a radio is selected
        document.querySelectorAll('.options input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const questionBlock = this.closest('.options');
                const qid = questionBlock.dataset.question;
                const correct = questionBlock.dataset.correct;
                const feedbackDiv = document.getElementById(`feedback-${qid}`);

                // Disable all radios in this question
                questionBlock.querySelectorAll('input[type="radio"]').forEach(r => r.disabled = true);

                if (this.value === correct) {
                    score++;
                    feedbackDiv.textContent = praises[Math.floor(Math.random() * praises.length)];
                    feedbackDiv.className = 'correct';
                } else {
                    const correctLetter = correct;
                    const correctLabel = questionBlock.querySelector(`label input[value="${correct}"]`).parentNode.textContent.trim();
                    feedbackDiv.innerHTML = `${encouragements[Math.floor(Math.random() * encouragements.length)]}<br>
                                            The correct answer is <strong>${correctLetter.toUpperCase()}): ${correctLabel}</strong>.`;
                    feedbackDiv.className = 'incorrect';
                }

                // Check if all questions answered
                checkIfAllAnswered();
            });
        });

        function checkIfAllAnswered() {
            const answered = document.querySelectorAll('.options input[type="radio"]:checked').length;
            document.getElementById('final-submit').disabled = (answered < totalQuestions);
        }

        document.getElementById('final-submit').addEventListener('click', function() {
            const studentName = document.getElementById('student-name').value.trim() || 'Anonymous Student';

            document.getElementById('score-display').textContent = `You scored ${score} out of ${totalQuestions}!`;
            document.getElementById('name-display').textContent = `Student: ${studentName}`;
            document.getElementById('results').style.display = 'block';

            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });

            // "Email" results via mailto
            const subject = encodeURIComponent(`Maggie Quiz Score - ${studentName}`);
            const body = encodeURIComponent(
                `Student Name: ${studentName}\n` +
                `Score: ${score} out of ${totalQuestions}\n` +
                `Date: ${new Date().toLocaleString()}\n\n` +
                `Quiz completed on the Stephen Crane's Maggie interactive quiz.`
            );
            const mailtoLink = `mailto:beth.ritter-guth@desales.edu?subject=${subject}&body=${body}`;
            window.location.href = mailtoLink;
        });
    </script>
</body>
</html>